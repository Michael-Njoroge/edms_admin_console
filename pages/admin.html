<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Console Page</title>

    <!-- Main css -->
    <link rel="stylesheet" href="../assets/css/main.css" />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../assets/bootstrap/css/bootstrap.min.css" />
    <link
      rel="stylesheet"
      href="../assets/font-awesome/css/font-awesome.min.css"
    />

    <link rel="stylesheet" href="../assets/css/style.css" />

    <!-- DataTable CSS -->
    <link rel="stylesheet" href="../assets/DataTables/datatables.min.css" />

    <!-- jQuery -->
    <script src="../assets/js/jquery.min.js"></script>

    <!-- Bootstrap JavaScript -->
    <script src="../assets/bootstrap/js/bootstrap.min.js"></script>

    <!-- Toast -->
    <link rel="stylesheet" href="../assets/toastr/toastr.min.css" />
  </head>

  <body
    onload="getData(); getGroupMembershipsData(); fetchData(); populateUsersTable();"
  >
    <!-- Profile Dropdown Menu -->
    <nav class="mnb navbar navbar-default navbar-fixed-top">
      <div class="container-fluid">
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li>
              <a href="#"><i class="fa fa-bell-o"></i></a>
            </li>
            <li>
              <a href="#"><i class="fa fa-comment-o"></i></a>
            </li>
            <li class="dropdown">
              <a
                id="user-name"
                href="#"
                class="dropdown-toggle"
                data-toggle="dropdown"
                role="button"
                aria-haspopup="true"
                aria-expanded="false"
              >
                <img
                  id="user-image"
                  src=""
                  alt="User Image"
                  class="user-image"
                />
              </a>
              <ul class="dropdown-menu">
                <li>
                  <a href="#" data-toggle="modal" data-target="#profileModal"
                    >Profile</a
                  >
                </li>
                <li>
                  <a
                    href="#"
                    id="uploadPhotoBtn"
                    data-toggle="modal"
                    data-target="#uploadPhotoModal"
                    >Upload Photo</a
                  >
                </li>
                <li>
                  <a
                    href="#"
                    id="uploadSignatureBtn"
                    data-toggle="modal"
                    data-target="#uploadSignatureModal"
                    >Upload Signature</a
                  >
                </li>
                <li>
                  <a
                    href="#"
                    id="uploadStampBtn"
                    data-toggle="modal"
                    data-target="#uploadStampModal"
                    >Upload Stamp</a
                  >
                </li>
                <li role="separator" class="divider"></li>
                <li><a href="#" id="logout">Logout</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!--msb: main sidebar-->
    <div class="msb" id="msb">
      <nav class="navbar" role="navigation">
        <div class="navbar-header">
          <div class="brand-wrapper">
            <!-- Brand -->
            <center>
              <div class="brand-name-wrapper">
                <a class="navbar-img" href="#"
                  ><img
                    src="../images/DISI.jpg"
                    width="50px"
                    height="50px"
                    alt=""
                /></a>
              </div>
            </center>
          </div>
        </div>

        <ul class="nav navbar-nav">
          <li>
            <input
              type="radio"
              name="sidebar_tab1"
              id="sidebar_tab1"
              value="1"
              checked="1"
            />
            <label for="sidebar_tab1"
              ><i class="fa fa-dashboard"></i> Dashboard</label
            >
          </li>

          <li>
            <input
              type="radio"
              name="sidebar_tab1"
              id="sidebar_tab6"
              value="6"
            />
            <label for="sidebar_tab6"><i class="fa fa-user"></i> Users</label>
          </li>

          <li>
            <input
              type="radio"
              name="sidebar_tab1"
              id="sidebar_tab3"
              value="3"
            />
            <label for="sidebar_tab3"><i class="fa fa-cog"></i> Groups</label>
          </li>

          <li>
            <input
              type="radio"
              name="sidebar_tab1"
              id="sidebar_tab4"
              value="4"
            />
            <label for="sidebar_tab4"
              ><i class="fa fa-users"></i> Membership</label
            >
          </li>

          <li>
            <input
              type="radio"
              name="sidebar_tab1"
              id="sidebar_tab5"
              value="5"
            />
            <label for="sidebar_tab5"
              ><i class="fa fa-lock"></i> Permissions</label
            >
          </li>

          <li>
            <input
              type="radio"
              name="sidebar_tab1"
              id="sidebar_tab7"
              value="7"
            />
            <label for="sidebar_tab7"
              ><i class="fa fa-search"></i> Lookups</label
            >
          </li>

          <li>
            <input
              type="radio"
              name="sidebar_tab1"
              id="sidebar_tab8"
              value="8"
            />
            <label for="sidebar_tab8"
              ><i class="fa fa-exchange"></i> Serializers</label
            >
          </li>
        </ul>
      </nav>
    </div>

    <!--main content wrapper-->
    <div class="mcw">
      <!--navigation here-->
      <!--main content view-->
      <div class="cv">
        <div class="row">
          <div class="col-md-12">
            <div class="card elevation-3">
              <!-- ******************************Create Group modal********************************** -->
              <div
                class="modal fade"
                id="form"
                tabindex="-1"
                role="dialog"
                aria-labelledby="exampleModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header border-bottom-0">
                      <h5 class="modal-title" id="exampleModalLabel">
                        Create New Group
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <form
                      id="createForm"
                      onsubmit="event.preventDefault(); createGroup();"
                    >
                      <div class="modal-body">
                        <div class="form-group">
                          <label for="group_name">Group Name</label>
                          <input
                            type="text"
                            class="form-control"
                            id="group_name"
                            name="group_name"
                            placeholder="Enter Group Name"
                          />
                        </div>
                        <label for="adminSelect">Group Admin</label>
                        <select
                          id="adminSelect"
                          name="adminSelect"
                          class="form-control"
                        >
                          <!-- Populate dropdown with existing users -->
                        </select>
                      </div>
                      <div
                        class="modal-footer border-top-0 d-flex justify-content-center"
                      >
                        <button
                          type="submit"
                          class="btn"
                          id="submitBtn"
                          style="background: #355b11; color: white"
                        >
                          Submit
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>

              <!-- ******************************Edit Group modal********************************** -->
              <div
                class="modal fade"
                id="editForm"
                tabindex="-1"
                role="dialog"
                aria-labelledby="exampleModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header border-bottom-0">
                      <h5 class="modal-title" id="exampleModalLabel">
                        Edit Group
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <form
                      id="formEdit"
                      onsubmit="event.preventDefault(); submitEditForm();"
                    >
                      <div class="modal-body">
                        <input
                          type="hidden"
                          class="form-control"
                          id="edit_group_id"
                        />
                        <input
                          type="hidden"
                          class="form-control"
                          id="edit_group_admin_id"
                        />
                        <div class="form-group">
                          <label for="group_name">Group Name</label>
                          <input
                            type="text"
                            class="form-control"
                            id="edit_group_name"
                            name="edit_group_name"
                            placeholder="Enter Group Name"
                          />
                        </div>
                        <div class="form-group">
                          <label for="edit_adminSelect">Select New Admin</label>
                          <select
                            id="edit_adminSelect"
                            name="edit_adminSelect"
                            class="form-control"
                          >
                            <!-- Populate this dropdown with existing users -->
                          </select>
                        </div>
                      </div>
                      <div
                        class="modal-footer border-top-0 d-flex justify-content-center"
                      >
                        <button
                          type="submit"
                          id="editSubmitBtn"
                          class="btn"
                          style="background: #355b11; color: white"
                        >
                          Submit
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>

              <!-- ******************************Confirm Delete Modal********************************** -->
              <div
                class="modal fade"
                id="confirmDeleteModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="confirmDeleteModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header border-bottom-0">
                      <h5 class="modal-title" id="confirmDeleteModalLabel">
                        Confirm Delete
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <p>Are you sure you want to delete this group?</p>
                      <!-- Hidden input field to store the group ID -->
                      <input type="hidden" id="deleteGroupId" />
                    </div>
                    <div
                      class="modal-footer border-top-0 d-flex justify-content-center"
                    >
                      <button
                        type="button"
                        class="btn btn-secondary"
                        data-dismiss="modal"
                      >
                        Cancel
                      </button>
                      <button
                        type="button"
                        class="btn btn-danger"
                        id="deleteGroupBtn"
                        onclick="deleteGroup()"
                      >
                        Delete
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- **************Confirm Delete Mmebership Modal******************** -->
              <div
                class="modal fade"
                id="confirmDeleteMmebershipModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="confirmDeleteMembership"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header border-bottom-0">
                      <h5 class="modal-title" id="confirmDeleteMembership">
                        Confirm Delete
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <p>
                        Are you sure you want to delete this group membership?
                      </p>
                      <!-- Hidden input field to store the group membership ID -->
                      <input type="hidden" id="deleteMembershipId" />
                    </div>
                    <div
                      class="modal-footer border-top-0 d-flex justify-content-center"
                    >
                      <button
                        type="button"
                        class="btn btn-secondary"
                        data-dismiss="modal"
                      >
                        Cancel
                      </button>
                      <button
                        type="button"
                        id="deleteGroupMembershipBtn"
                        class="btn btn-danger"
                        onclick="deleteGroupMembership()"
                      >
                        Delete
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Profile Modal -->
              <div
                class="modal fade"
                id="profileModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="profileModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="profileModalLabel">
                        Profile
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <!-- Display user profile information here -->
                      <p>
                        <strong>Username:</strong>
                        <span id="profile-username">Loading...</span>
                      </p>
                      <p>
                        <strong>Name:</strong>
                        <span id="profile-name">Loading...</span>
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Upload Photo Modal -->
              <div
                class="modal fade"
                id="uploadPhotoModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="uploadPhotoModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="uploadPhotoModalLabel">
                        Upload Photo
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <form id="uploadPhotoForm" enctype="multipart/form-data">
                        <div class="form-group">
                          <label for="photoFile">Select Photo:</label>
                          <input
                            type="file"
                            class="form-control-file"
                            id="photoFile"
                            accept="image/*"
                          />
                        </div>
                        <!-- Image preview container -->
                        <div id="imagePreviewContainer" style="display: none">
                          <img
                            id="imagePreview"
                            alt="Selected Image"
                            style="max-width: 100%; max-height: 200px"
                          />
                        </div>
                      </form>
                    </div>
                    <div class="modal-footer">
                      <button
                        type="button"
                        class="btn"
                        style="background: #355b11; color: white"
                        onclick="handleFileSelect(event)"
                        id="uploadButton"
                      >
                        Upload
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Upload Signature Modal -->
              <div
                class="modal fade"
                id="uploadSignatureModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="uploadSignatureModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="uploadSignatureModalLabel">
                        Upload Signature
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <form
                        id="uploadSignatureForm"
                        enctype="multipart/form-data"
                      >
                        <div class="form-group">
                          <label for="signatureFile">Select Signature:</label>
                          <input
                            type="file"
                            class="form-control-file"
                            id="signatureFile"
                          />
                        </div>
                        <!-- Signature image preview container -->
                        <div
                          id="signaturePreviewContainer"
                          style="display: none"
                        >
                          <img
                            id="signaturePreview"
                            alt="Selected Signature"
                            style="max-width: 100%; max-height: 200px"
                          />
                        </div>
                      </form>
                    </div>
                    <div class="modal-footer">
                      <button
                        type="button"
                        class="btn"
                        style="background: #355b11; color: white"
                        onclick="handleSignatureFileSelect(event)"
                        id="uploadSignatureButton"
                      >
                        Upload
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Upload Stamp Modal -->
              <div
                class="modal fade"
                id="uploadStampModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="uploadStampModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="uploadStampModalLabel">
                        Upload Stamp
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <form id="uploadStampForm" enctype="multipart/form-data">
                        <div class="form-group">
                          <label for="stampFile">Select Stamp:</label>
                          <input
                            type="file"
                            class="form-control-file"
                            id="stampFile"
                          />
                        </div>
                        <!-- Stamp image preview container -->
                        <div id="stampPreviewContainer" style="display: none">
                          <img
                            id="stampPreview"
                            alt="Selected Stamp"
                            style="max-width: 100%; max-height: 200px"
                          />
                        </div>
                      </form>
                    </div>
                    <div class="modal-footer">
                      <button
                        type="button"
                        class="btn"
                        style="background: #355b11; color: white"
                        onclick="handleStampFileSelect(event)"
                        id="uploadStampButton"
                      >
                        Upload
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- ******************************Assign Users Modal********************************** -->
              <div
                class="modal fade"
                id="assignUsersModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="assignUsersModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header border-bottom-0">
                      <h5 class="modal-title" id="assignUsersModalLabel">
                        Assign Users to a Group
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <form
                      id="assignUsersForm"
                      onsubmit="event.preventDefault(); assignUsersToGroup();"
                    >
                      <div class="modal-body">
                        <div class="form-group">
                          <label for="assign_group">Select Group</label>
                          <select
                            class="form-control"
                            id="assign_group"
                            name="assign_group"
                          ></select>
                        </div>
                        <div class="form-group">
                          <label for="assign_users">Select Users</label>
                          <select
                            class="form-control"
                            id="assign_users"
                            name="assign_users"
                          ></select>
                        </div>
                      </div>
                      <div
                        class="modal-footer border-top-0 d-flex justify-content-center"
                      >
                        <button
                          type="submit"
                          class="btn"
                          id="assignUsersBtn"
                          style="background: #355b11; color: white"
                        >
                          Assign Users
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>

              <!-- *************************Edit Group Membership Modal****************************** -->
              <div
                class="modal fade"
                id="editGroupMembershipModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="editGroupMembershipModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header border-bottom-0">
                      <h5
                        class="modal-title"
                        id="editGroupMembershipModalLabel"
                      >
                        Edit Group Membership
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <form
                      id="editGroupMembershipForm"
                      onsubmit="event.preventDefault(); submitEditGroupMembership();"
                    >
                      <div class="modal-body">
                        <input
                          type="hidden"
                          class="form-control"
                          id="editMembershipId"
                        />
                        <div class="form-group">
                          <label for="editMembershipGroup">Select Group</label>
                          <select
                            class="form-control"
                            id="editMembershipGroup"
                            name="editMembershipGroup"
                          >
                            <!-- Populate with group options dynamically -->
                          </select>
                        </div>
                        <div class="form-group">
                          <label for="editMembershipUser">Select User</label>
                          <select
                            class="form-control"
                            id="editMembershipUser"
                            name="editMembershipUser"
                            multiple
                          >
                            <!-- Populate with user options dynamically -->
                          </select>
                        </div>
                      </div>
                      <div
                        class="modal-footer border-top-0 d-flex justify-content-center"
                      >
                        <button
                          type="submit"
                          class="btn"
                          id="editMembershipBtn"
                          style="background: #355b11; color: white"
                        >
                          Submit
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>

              <!-- Assign group permissions modal -->
              <div
                class="modal fade"
                id="createPermissionModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="createPermissionModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="createPermissionModalLabel">
                        Assign Permissions to Group
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <form>
                        <div class="form-group">
                          <label for="groupSelect">Select Group:</label>
                          <select class="form-control" id="groupSelect">
                            <!-- Group options will be populated dynamically -->
                          </select>
                        </div>
                        <div class="form-group">
                          <label for="folderSelect">Select Folder:</label>
                          <select class="form-control" id="folderSelect">
                            <!-- Folder options will be populated dynamically -->
                          </select>
                        </div>
                        <!-- Add a div container for checkboxes -->
                        <div id="checkboxContainer"></div>
                      </form>
                    </div>
                    <div class="modal-footer">
                      <button
                        type="button"
                        class="btn"
                        style="background: #355b11; color: white"
                        onclick="createPermission()"
                        id="createPermissionModalBtn"
                      >
                        Assign Permission
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Delete Permission Modal -->
              <div
                class="modal fade"
                id="confirmDeletePermissionModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="exampleModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">
                        Confirm Deletion
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      Are you sure you want to delete this permission?
                    </div>
                    <div class="modal-footer">
                      <button
                        type="button"
                        id="deletePermissionBtn"
                        class="btn btn-danger"
                        onclick="deletePermission()"
                      >
                        Delete
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <div class="content" id="content">
                <nav aria-label="breadcrumb">
                  <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="#">Home</a></li>
                    <li class="breadcrumb-item active" aria-current="page">
                      Dashboard
                    </li>
                  </ol>
                </nav>
                <div class="data-info">
                  <div
                    class="box"
                    data-toggle="tooltip"
                    data-placement="bottom"
                    title="View Users"
                  >
                    <i class="fa fa-users"></i>
                    <div class="data">
                      <p>Users</p>
                      <span id="userCount"
                        ><i class="fa fa-spinner fa-spin"></i
                      ></span>
                    </div>
                  </div>
                  <div
                    class="box"
                    data-toggle="tooltip"
                    data-placement="bottom"
                    title="View Groups"
                  >
                    <i class="fa fa-users"></i>
                    <div class="data">
                      <p>Groups</p>
                      <span id="groupCount"
                        ><i class="fa fa-spinner fa-spin"></i
                      ></span>
                    </div>
                  </div>
                  <div
                    class="box"
                    data-toggle="tooltip"
                    data-placement="bottom"
                    title="View Folders"
                  >
                    <i class="fa fa-folder"></i>
                    <div class="data">
                      <p>Folders</p>
                      <span id="folderCount"
                        ><i class="fa fa-spinner fa-spin"></i
                      ></span>
                    </div>
                  </div>
                </div>
              </div>

              <div id="categories" style="margin-top: 30px">
                <!-- Breadcrumb -->
                <nav aria-label="breadcrumb">
                  <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="#">Home</a></li>
                    <li class="breadcrumb-item active" aria-current="page">
                      Lookups
                    </li>
                  </ol>
                </nav>
                <p style="font-weight: bold; cursor: pointer">Categories</p>
                <div class="row">
                  <div class="col-md-8">
                    <ul id="tree1" class="tree"></ul>
                  </div>
                </div>
              </div>

              <!-- Modal for adding a new node -->
              <div
                class="modal fade"
                id="newNodeModal"
                tabindex="-1"
                aria-labelledby="newNodeModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="newNodeModalLabel">
                        Add New Node
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <label for="nodeNameInput" class="form-label"
                        >Node Name:</label
                      >
                      <input
                        type="text"
                        id="nodeNameInput"
                        class="form-control"
                        placeholder="Enter node name"
                      />
                    </div>
                    <div class="modal-footer">
                      <button
                        type="button"
                        class="btn"
                        style="background: #355b11; color: white"
                        id="saveNodeBtn"
                      >
                        Submit
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- ******************************Create Serializer modal********************************** -->
              <div
                class="modal fade"
                id="serializerForm"
                tabindex="-1"
                role="dialog"
                aria-labelledby="serializerModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header border-bottom-0">
                      <h5 class="modal-title" id="serializerModalLabel">
                        Create New Serializer
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <form
                      id="serializerCreateForm"
                      onsubmit="event.preventDefault(); createSerializer();"
                    >
                      <div class="modal-body">
                        <div class="form-group">
                          <label for="prefix">Prefix</label>
                          <input
                            type="text"
                            class="form-control"
                            id="prefix"
                            name="prefix"
                            placeholder="Enter Prefix"
                          />
                        </div>
                        <div class="form-group">
                          <label for="number_format">Number Format</label>
                          <input
                            type="text"
                            class="form-control"
                            id="number_format"
                            name="number_format"
                            placeholder="Enter Number Format"
                          />
                        </div>
                        <div class="form-group">
                          <label for="postfix">Postfix</label>
                          <input
                            type="text"
                            class="form-control"
                            id="postfix"
                            name="postfix"
                            placeholder="Enter Postfix"
                          />
                        </div>
                        <div class="form-group">
                          <label for="date_format">Date Format</label>
                          <input
                            type="text"
                            class="form-control"
                            id="date_format"
                            name="date_format"
                            placeholder="Enter Date Format"
                          />
                        </div>
                        <div class="form-group">
                          <label for="order_of_items">Order of Items</label>
                          <input
                            type="text"
                            class="form-control"
                            id="order_of_items"
                            name="order_of_items"
                            placeholder="Enter Order of Items"
                          />
                        </div>
                        <div class="form-group">
                          <label for="last_number">Last Number</label>
                          <input
                            type="text"
                            class="form-control"
                            id="last_number"
                            name="last_number"
                            placeholder="Enter Last Number"
                          />
                        </div>
                      </div>
                      <div
                        class="modal-footer border-top-0 d-flex justify-content-center"
                      >
                        <button
                          type="submit"
                          class="btn"
                          id="serializerSubmitBtn"
                          style="background: #355b11; color: white"
                        >
                          Submit
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>

              <!-- ******************************Edit Serializer modal********************************** -->
              <div
                class="modal fade"
                id="editSerializerForm"
                tabindex="-1"
                role="dialog"
                aria-labelledby="editSerializerModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header border-bottom-0">
                      <h5 class="modal-title" id="editSerializerModalLabel">
                        Edit Serializer
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <form
                      id="editSerializerForm"
                      onsubmit="event.preventDefault(); submitEditSerializerForm();"
                    >
                      <div class="modal-body">
                        <input
                          type="hidden"
                          class="form-control"
                          id="edit_serializer_id"
                        />
                        <div class="form-group">
                          <label for="edit_last_number">Last Number</label>
                          <input
                            type="text"
                            class="form-control"
                            id="edit_last_number"
                            name="edit_last_number"
                            placeholder="Enter Last Number"
                          />
                        </div>
                        <div class="form-group">
                          <label for="edit_order_of_items"
                            >Order of Items</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            id="edit_order_of_items"
                            name="edit_order_of_items"
                            placeholder="Enter Order of Items"
                          />
                        </div>
                        <div class="form-group">
                          <label for="edit_prefix">Prefix</label>
                          <input
                            type="text"
                            class="form-control"
                            id="edit_prefix"
                            name="edit_prefix"
                            placeholder="Enter Prefix"
                          />
                        </div>
                        <div class="form-group">
                          <label for="edit_number_format">Number Format</label>
                          <input
                            type="text"
                            class="form-control"
                            id="edit_number_format"
                            name="edit_number_format"
                            placeholder="Enter Number Format"
                          />
                        </div>
                        <div class="form-group">
                          <label for="edit_postfix">Postfix</label>
                          <input
                            type="text"
                            class="form-control"
                            id="edit_postfix"
                            name="edit_postfix"
                            placeholder="Enter Postfix"
                          />
                        </div>
                        <div class="form-group">
                          <label for="edit_date_format">Date Format</label>
                          <input
                            type="text"
                            class="form-control"
                            id="edit_date_format"
                            name="edit_date_format"
                            placeholder="Enter Date Format"
                          />
                        </div>
                      </div>
                      <div
                        class="modal-footer border-top-0 d-flex justify-content-center"
                      >
                        <button
                          type="submit"
                          class="btn"
                          id="editSerializerSubmitBtn"
                          style="background: #355b11; color: white"
                        >
                          Submit
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>

              <!-- ******************************Confirm Delete Serializer Modal********************************** -->
              <div
                class="modal fade"
                id="confirmDeleteSerializerModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="confirmDeleteSerializerModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header border-bottom-0">
                      <h5
                        class="modal-title"
                        id="confirmDeleteSerializerModalLabel"
                      >
                        Confirm Delete Serializer
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <p>Are you sure you want to delete this serializer?</p>
                      <!-- Hidden input field to store the serializer ID -->
                      <input type="hidden" id="deleteSerializerId" />
                    </div>
                    <div
                      class="modal-footer border-top-0 d-flex justify-content-center"
                    >
                      <button
                        type="button"
                        class="btn btn-secondary"
                        data-dismiss="modal"
                      >
                        Cancel
                      </button>
                      <button
                        type="button"
                        class="btn btn-danger"
                        id="deleteSerializerBtn"
                        onclick="deleteSerializer()"
                      >
                        Delete
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Add this modal markup to your HTML body -->
              <div
                class="modal"
                id="selectFolderModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="selectFolderModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="selectFolderModalLabel">
                        Select Folder
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <label for="folderSelect">Choose a Folder:</label>
                      <select class="form-control" id="folderSelect"></select>
                    </div>
                    <div class="modal-footer">
                      <button
                        type="button"
                        class="btn btn-secondary"
                        data-dismiss="modal"
                      >
                        Close
                      </button>
                      <button
                        type="button"
                        class="btn btn-primary"
                        onclick="fetchGroupPermissions()"
                      >
                        Fetch Permissions
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- *******************Groups Table***************** -->
              <div id="groupsTableContainer" class="table-container">
                <div class="card-header d-flex justify-content-between mb-3">
                  <!-- Breadcrumb -->
                  <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                      <li class="breadcrumb-item"><a href="#">Home</a></li>
                      <li class="breadcrumb-item active" aria-current="page">
                        Groups
                      </li>
                    </ol>
                  </nav>
                  <button
                    type="button"
                    data-toggle="modal"
                    data-target="#form"
                    class="btn btn-secondary"
                  >
                    New Group
                  </button>
                  <button
                    type="button"
                    data-toggle="modal"
                    data-target="#assignUsersModal"
                    class="btn btn-secondary"
                  >
                    Assign User
                  </button>
                  <button
                    type="button"
                    data-toggle="modal"
                    data-target="#createPermissionModal"
                    class="btn btn-secondary"
                  >
                    Assign Permissions
                  </button>
                </div>
                <br />
                <table
                  id="tab"
                  class="table table-hover table-bordered"
                  cellspacing="3"
                  style="
                    box-shadow: 0 4px 8px rgba(5, 2, 2, 0.1);
                    width: 100%;
                    border-radius: 10px;
                  "
                >
                  <thead>
                    <tr>
                      <th>#</th>
                      <th>Group Name</th>
                      <th>Group Admin</th>
                      <th>Users</th>
                      <th>Members</th>
                      <th>Status</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody id="tbody"></tbody>
                </table>
                <!-- Pagination -->
                <div
                  id="pagination"
                  class="pagination justify-content-center"
                ></div>
              </div>

              <!-- *******************Group Memberships Table***************** -->
              <div
                id="groupMembershipsTableContainer"
                class="table-container"
                style="display: none"
              >
                <div class="card-header d-flex justify-content-between mb-3">
                  <!-- Breadcrumb -->
                  <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                      <li class="breadcrumb-item"><a href="#">Home</a></li>
                      <li class="breadcrumb-item active" aria-current="page">
                        Memberships
                      </li>
                    </ol>
                  </nav>
                </div>
                <br />
                <table
                  id="groupMembershipsTab"
                  class="table table-hover table-bordered"
                  cellspacing="3"
                  style="
                    justify-content: center;
                    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                    width: 100%;
                  "
                >
                  <thead>
                    <tr>
                      <th>#</th>
                      <th>User</th>
                      <th>Group</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody id="groupMembershipsTbody"></tbody>
                </table>
                <div
                  id="membershipsPagination"
                  class="pagination justify-content-center"
                ></div>
              </div>

              <!-- *******************Group Permissions Cards***************** -->
              <div class="card-container" style="display: none">
                <div class="card-header d-flex justify-content-between mb-3">
                  <!-- Breadcrumb -->
                  <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                      <li class="breadcrumb-item"><a href="#">Home</a></li>
                      <li class="breadcrumb-item active" aria-current="page">
                        Permissions
                      </li>
                    </ol>
                  </nav>
                </div>
                <br />
                <div id="groupPermissionsCardContainer">
                  <!-- Group permissions will be dynamically added here -->
                </div>
              </div>

              <!-- *******************Users Table***************** -->
              <div
                id="usersTableContainer"
                class="table-container"
                style="display: none"
              >
                <div class="card-header d-flex justify-content-between mb-3">
                  <!-- Breadcrumb -->
                  <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                      <li class="breadcrumb-item"><a href="#">Home</a></li>
                      <li class="breadcrumb-item active" aria-current="page">
                        Users
                      </li>
                    </ol>
                  </nav>
                </div>
                <table
                  id="usersTable"
                  class="table table-hover table-bordered"
                  cellspacing="3"
                  style="
                    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                    width: 100%;
                    border-radius: 10px;
                  "
                >
                  <thead>
                    <tr>
                      <th>#</th>
                      <th>Name</th>
                      <th>Username</th>
                      <th>Groups</th>
                      <th>Photo</th>
                      <th>Stamp</th>
                      <th>Signature</th>
                      <th>Status</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody id="usersTbody"></tbody>
                </table>
                <div
                  id="usersPagination"
                  class="pagination justify-content-center"
                ></div>
              </div>

              <!-- *******************Serializer Table***************** -->
              <div
                id="serializerTableContainer"
                class="table-container"
                style="display: none"
              >
                <div class="card-header d-flex justify-content-between mb-3">
                  <!-- Breadcrumb -->
                  <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                      <li class="breadcrumb-item"><a href="#">Home</a></li>
                      <li class="breadcrumb-item active" aria-current="page">
                        Serializer
                      </li>
                    </ol>
                  </nav>
                  <button
                    type="button"
                    data-toggle="modal"
                    data-target="#serializerForm"
                    class="btn btn-secondary"
                  >
                    New Serializer
                  </button>
                </div>
                <br />
                <table
                  id="serializerTable"
                  class="table table-hover table-bordered"
                  cellspacing="3"
                  style="
                    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                    width: 100%;
                    border-radius: 10px;
                  "
                >
                  <thead>
                    <tr>
                      <th>#</th>
                      <th>Number Format</th>
                      <th>Date Format</th>
                      <th>Prefix</th>
                      <th>Postfix</th>
                      <th>Order of Items</th>
                      <th>Last Number</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody id="serializerTbody"></tbody>
                </table>
                <div
                  id="serializerPagination"
                  class="pagination justify-content-center"
                ></div>
              </div>

              <!-- main js -->
              <script src="../assets/js/logout.js"></script>
              <script src="../assets/js/script.js"></script>
              <script src="../assets/js/groups.js"></script>
              <script src="../assets/js/sidebar.js"></script>
              <script src="../assets/js/navbar.js"></script>
              <script src="../assets/js/usersTable.js"></script>
              <script src="../assets/js/groupMemberships.js"></script>
              <script src="../assets/js/groupPermissions.js"></script>
              <script src="../assets/js/lookups.js"></script>
              <script src="../assets/js/serializer.js"></script>

              <script src="../assets/toastr/toastr.min.js"></script>
              <script src="../assets/js/jquery.counterup.min.js"></script>
              <script src="../assets/js/jquery.waypoints.min.js"></script>
              <script src="../assets/DataTables/datatables.min.js"></script>
              <script src="../assets/js/jstree.js"></script>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
