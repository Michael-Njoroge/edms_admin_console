<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Console Page</title>

    <!-- Main css -->
    <link rel="stylesheet" href="../assets/css/main.css" />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../assets/bootstrap/css/bootstrap.min.css" />
    <link
      rel="stylesheet"
      href="../assets/font-awesome/css/font-awesome.min.css"
    />

    <link rel="stylesheet" href="../assets/css/style.css" />

    <!-- DataTable CSS -->
    <link rel="stylesheet" href="../assets/DataTables/datatables.min.css" />
    <link
      rel="stylesheet"
      href="../assets/DataTables/jquery.dataTables.min.css"
    />
    <link
      rel="stylesheet"
      href="../assets/DataTables/buttons.dataTables.min.css"
    />

    <!-- jQuery -->
    <script src="../assets/js/jquery.min.js"></script>

    <!-- Bootstrap JavaScript -->
    <script src="../assets/bootstrap/js/bootstrap.min.js"></script>

    <!-- Toast -->
    <link rel="stylesheet" href="../assets/toastr/toastr.min.css" />

    <!-- Tom select search -->
    <link rel="stylesheet" href="../assets/css/tom-select.min.css" />
  </head>

  <body
    onload="getData(); getGroupMembershipsData(); fetchData(); populateUsersTable();"
  >
    <!-- Profile Dropdown Menu -->
    <nav class="mnb navbar navbar-default navbar-fixed-top">
      <div class="container-fluid">
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li id="notificationsli">
              <a href="#" id="notifications"
                ><i class="fa fa-bell-o"></i
                ><span
                  class="noty-manager-bubble"
                  style="margin-left: -2px; top: 10px; opacity: 1"
                  >6</span
                ></a
              >
              <div
                id="notification-container"
                class="dropdown-menu"
                role="menu"
                aria-labelledby="drop3"
              >
                <section class="panel">
                  <header class="panel-heading">
                    <strong>Notifications</strong>
                  </header>
                  <div id="notification-list" class="list-group list-group-alt">
                    <div>
                      <div
                        class="noty-manager-list-item noty-manager-list-item-error"
                      >
                        <div class="activity-item">
                          <i class="fa fa-user text-success"></i>
                          <div class="activity">
                            <a href="#">John Doe</a> created a new group
                            <span>14 minutes ago</span>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div>
                      <div
                        class="noty-manager-list-item noty-manager-list-item-error"
                      >
                        <div class="activity-item">
                          <i class="fa fa-user text-success"></i>
                          <div class="activity">
                            <a href="#">Alice Johnson</a>
                            updated user details
                            <span>30 minutes ago</span>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div>
                      <div
                        class="noty-manager-list-item noty-manager-list-item-error"
                      >
                        <div class="activity-item">
                          <i class="fa fa-user text-success"></i>
                          <div class="activity">
                            <a href="#">Jane Smith</a> was assigned to the
                            Marketing group
                            <span>1 hour ago</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <footer class="panel-footer">
                    <a href="#" class="pull-right"><i class="fa fa-cog"></i></a>
                    <a href="#" data-toggle="class:show animated fadeInRight"
                      >See all the notifications</a
                    >
                  </footer>
                </section>
              </div>
            </li>

            <li>
              <a href="#">
                <img
                  onclick="openNav()"
                  id="user-image"
                  src=""
                  alt="User Image"
                  class="user-image"
                />
              </a>
            </li>
            <div id="mySidenav" class="sidenav">
              <div class="user-info">
                <span class="username" id="profile-name"></span>
              </div>
              <a href="#" class="closebtn" onclick="closeNav()">&times;</a>

              <a href="#" data-toggle="modal" data-target="#profileModal"
                ><i class="fa fa-user"></i> <span class="menu-text"></span>Your
                Profile</a
              >

              <a
                href="#"
                id="uploadPhotoBtn"
                data-toggle="modal"
                data-target="#uploadPhotoModal"
                ><i class="fa fa-camera"></i>
                <span class="menu-text"></span>Upload Photo</a
              >

              <a
                href="#"
                id="uploadSignatureBtn"
                data-toggle="modal"
                data-target="#uploadSignatureModal"
                ><i class="fa fa-pencil"></i>
                <span class="menu-text"></span>Upload Signature</a
              >

              <a
                href="#"
                id="uploadStampBtn"
                data-toggle="modal"
                data-target="#uploadStampModal"
                ><i class="fa fa-certificate"></i>
                <span class="menu-text"></span>Upload Stamp</a
              >
              <a href="#" id="logout"
                ><i class="fa fa-sign-out"></i>
                <span class="menu-text"></span>Logout</a
              >
            </div>
          </ul>
        </div>
      </div>
    </nav>

    <!--msb: main sidebar-->
    <div class="msb" id="msb">
      <nav class="navbar" role="navigation">
        <div class="navbar-header">
          <div class="brand-wrapper">
            <!-- Brand -->
            <center>
              <div class="brand-name-wrapper">
                <a class="navbar-img" href="#"
                  ><img
                    src="../images/DISI.jpg"
                    width="50px"
                    height="50px"
                    alt=""
                /></a>
              </div>
            </center>
          </div>
        </div>

        <ul class="nav navbar-nav">
          <li>
            <input
              type="radio"
              name="sidebar_tab1"
              id="sidebar_tab1"
              value="1"
              checked="1"
            />
            <label for="sidebar_tab1"
              ><i class="fa fa-dashboard"></i> Dashboard</label
            >
          </li>

          <li>
            <input
              type="radio"
              name="sidebar_tab1"
              id="sidebar_tab6"
              value="6"
            />
            <label for="sidebar_tab6"><i class="fa fa-user"></i> Users</label>
          </li>

          <li>
            <input
              type="radio"
              name="sidebar_tab1"
              id="sidebar_tab3"
              value="3"
            />
            <label for="sidebar_tab3"><i class="fa fa-cog"></i> Groups</label>
          </li>

          <li>
            <input
              type="radio"
              name="sidebar_tab1"
              id="sidebar_tab4"
              value="4"
            />
            <label for="sidebar_tab4"
              ><i class="fa fa-users"></i> Membership</label
            >
          </li>

          <li>
            <input
              type="radio"
              name="sidebar_tab1"
              id="sidebar_tab5"
              value="5"
            />
            <label for="sidebar_tab5"
              ><i class="fa fa-lock"></i> Permissions</label
            >
          </li>

          <li>
            <input
              type="radio"
              name="sidebar_tab1"
              id="sidebar_tab7"
              value="7"
            />
            <label for="sidebar_tab7"
              ><i class="fa fa-search"></i> Lookups</label
            >
          </li>

          <li>
            <input
              type="radio"
              name="sidebar_tab1"
              id="sidebar_tab8"
              value="8"
            />
            <label for="sidebar_tab8"
              ><i class="fa fa-exchange"></i> Serializers</label
            >
          </li>
        </ul>
      </nav>
    </div>

    <!--main content wrapper-->
    <div class="mcw">
      <!--navigation here-->
      <!--main content view-->
      <div class="cv">
        <div class="row">
          <div class="col-md-12">
            <div class="card elevation-3">
              <!-- ******************************Create Group modal********************************** -->
              <div
                class="modal fade"
                id="form"
                tabindex="-1"
                role="dialog"
                aria-labelledby="exampleModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header border-bottom-0">
                      <h5 class="modal-title" id="exampleModalLabel">
                        Create New Group
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <form
                      id="createForm"
                      onsubmit="event.preventDefault(); createGroup();"
                    >
                      <div class="modal-body">
                        <div class="form-group">
                          <label for="group_name">Group Name</label>
                          <input
                            type="text"
                            class="form-control"
                            id="group_name"
                            name="group_name"
                            placeholder="Enter Group Name"
                          />
                        </div>
                        <label for="adminSelect">Group Admin</label>
                        <select id="adminSelect" name="adminSelect">
                          <!-- Populate dropdown with existing users -->
                        </select>
                      </div>
                      <div
                        class="modal-footer border-top-0 d-flex justify-content-center"
                      >
                        <button
                          type="submit"
                          class="btn"
                          id="submitBtn"
                          style="background: #355b11; color: white"
                        >
                          Submit
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>

              <!-- ******************************Edit Group modal********************************** -->
              <div
                class="modal fade"
                id="editForm"
                tabindex="-1"
                role="dialog"
                aria-labelledby="exampleModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header border-bottom-0">
                      <h5 class="modal-title" id="exampleModalLabel">
                        Edit Group
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <form
                      id="formEdit"
                      onsubmit="event.preventDefault(); submitEditForm();"
                    >
                      <div class="modal-body">
                        <input
                          type="hidden"
                          class="form-control"
                          id="edit_group_id"
                        />
                        <input
                          type="hidden"
                          class="form-control"
                          id="edit_group_admin_id"
                        />
                        <div class="form-group">
                          <label for="group_name">Group Name</label>
                          <input
                            type="text"
                            class="form-control"
                            id="edit_group_name"
                            name="edit_group_name"
                            placeholder="Enter Group Name"
                          />
                        </div>
                        <div class="form-group">
                          <label for="edit_adminSelect">Select New Admin</label>
                          <select
                            id="edit_adminSelect"
                            name="edit_adminSelect"
                            class="form-control"
                          >
                            <!-- Populate this dropdown with existing users -->
                          </select>
                        </div>
                      </div>
                      <div
                        class="modal-footer border-top-0 d-flex justify-content-center"
                      >
                        <button
                          type="submit"
                          id="editSubmitBtn"
                          class="btn"
                          style="background: #355b11; color: white"
                        >
                          Submit
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>

              <!-- ******************************Confirm Delete Modal********************************** -->
              <div
                class="modal fade"
                id="confirmDeleteModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="confirmDeleteModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header border-bottom-0">
                      <h5 class="modal-title" id="confirmDeleteModalLabel">
                        Confirm Delete
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <p>Are you sure you want to delete this group?</p>
                      <!-- Hidden input field to store the group ID -->
                      <input type="hidden" id="deleteGroupId" />
                    </div>
                    <div
                      class="modal-footer border-top-0 d-flex justify-content-center"
                    >
                      <button
                        type="button"
                        class="btn btn-secondary"
                        data-dismiss="modal"
                      >
                        Cancel
                      </button>
                      <button
                        type="button"
                        class="btn btn-danger"
                        id="deleteGroupBtn"
                        onclick="deleteGroup()"
                      >
                        Delete
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- **************Confirm Delete Mmebership Modal******************** -->
              <div
                class="modal fade"
                id="confirmDeleteMmebershipModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="confirmDeleteMembership"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header border-bottom-0">
                      <h5 class="modal-title" id="confirmDeleteMembership">
                        Confirm Delete
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <p>
                        Are you sure you want to delete this group membership?
                      </p>
                      <!-- Hidden input field to store the group membership ID -->
                      <input type="hidden" id="deleteMembershipId" />
                    </div>
                    <div
                      class="modal-footer border-top-0 d-flex justify-content-center"
                    >
                      <button
                        type="button"
                        class="btn btn-secondary"
                        data-dismiss="modal"
                      >
                        Cancel
                      </button>
                      <button
                        type="button"
                        id="deleteGroupMembershipBtn"
                        class="btn btn-danger"
                        onclick="deleteGroupMembership()"
                      >
                        Delete
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Profile Modal -->
              <div
                class="modal fade"
                id="profileModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="profileModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="profileModalLabel">
                        Profile
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <!-- Display user profile information here -->
                      <p>
                        <strong>Username:</strong>
                        <span id="profile-username">Loading...</span>
                      </p>
                      <p>
                        <strong>Name:</strong>
                        <span id="profile-name">Loading...</span>
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Upload Photo Modal -->
              <div
                class="modal fade"
                id="uploadPhotoModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="uploadPhotoModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="uploadPhotoModalLabel">
                        Upload Photo
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <form id="uploadPhotoForm" enctype="multipart/form-data">
                        <div class="form-group">
                          <label for="photoFile">Select Photo:</label>
                          <input
                            type="file"
                            class="form-control-file"
                            id="photoFile"
                            accept="image/*"
                          />
                        </div>
                        <!-- Image preview container -->
                        <div id="imagePreviewContainer" style="display: none">
                          <img
                            id="imagePreview"
                            alt="Selected Image"
                            style="max-width: 100%; max-height: 200px"
                          />
                        </div>
                      </form>
                    </div>
                    <div class="modal-footer">
                      <button
                        type="button"
                        class="btn"
                        style="background: #355b11; color: white"
                        onclick="handleFileSelect(event)"
                        id="uploadButton"
                      >
                        Upload
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Upload Signature Modal -->
              <div
                class="modal fade"
                id="uploadSignatureModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="uploadSignatureModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="uploadSignatureModalLabel">
                        Upload Signature
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <form
                        id="uploadSignatureForm"
                        enctype="multipart/form-data"
                      >
                        <div class="form-group">
                          <label for="signatureFile">Select Signature:</label>
                          <input
                            type="file"
                            class="form-control-file"
                            id="signatureFile"
                          />
                        </div>
                        <!-- Signature image preview container -->
                        <div
                          id="signaturePreviewContainer"
                          style="display: none"
                        >
                          <img
                            id="signaturePreview"
                            alt="Selected Signature"
                            style="max-width: 100%; max-height: 200px"
                          />
                        </div>
                      </form>
                    </div>
                    <div class="modal-footer">
                      <button
                        type="button"
                        class="btn"
                        style="background: #355b11; color: white"
                        onclick="handleSignatureFileSelect(event)"
                        id="uploadSignatureButton"
                      >
                        Upload
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Upload Stamp Modal -->
              <div
                class="modal fade"
                id="uploadStampModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="uploadStampModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="uploadStampModalLabel">
                        Upload Stamp
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <form id="uploadStampForm" enctype="multipart/form-data">
                        <div class="form-group">
                          <label for="stampFile">Select Stamp:</label>
                          <input
                            type="file"
                            class="form-control-file"
                            id="stampFile"
                          />
                        </div>
                        <!-- Stamp image preview container -->
                        <div id="stampPreviewContainer" style="display: none">
                          <img
                            id="stampPreview"
                            alt="Selected Stamp"
                            style="max-width: 100%; max-height: 200px"
                          />
                        </div>
                      </form>
                    </div>
                    <div class="modal-footer">
                      <button
                        type="button"
                        class="btn"
                        style="background: #355b11; color: white"
                        onclick="handleStampFileSelect(event)"
                        id="uploadStampButton"
                      >
                        Upload
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- ******************************Assign Users Modal********************************** -->
              <div
                class="modal fade"
                id="assignUsersModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="assignUsersModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header border-bottom-0">
                      <h5 class="modal-title" id="assignUsersModalLabel">
                        Assign Users to a Group
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <form
                      id="assignUsersForm"
                      onsubmit="event.preventDefault(); assignUsersToGroup();"
                    >
                      <div class="modal-body">
                        <div class="form-group">
                          <label for="assign_group">Select Group</label>
                          <select
                            class="form-control"
                            id="assign_group"
                            name="assign_group"
                          ></select>
                        </div>
                        <div class="form-group">
                          <label for="assign_users">Select Users</label>
                          <select
                            class="form-control"
                            id="assign_users"
                            name="assign_users"
                          ></select>
                        </div>
                      </div>
                      <div
                        class="modal-footer border-top-0 d-flex justify-content-center"
                      >
                        <button
                          type="submit"
                          class="btn"
                          id="assignUsersBtn"
                          style="background: #355b11; color: white"
                        >
                          Assign Users
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>

              <!-- *************************Edit Group Membership Modal****************************** -->
              <div
                class="modal fade"
                id="editGroupMembershipModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="editGroupMembershipModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header border-bottom-0">
                      <h5
                        class="modal-title"
                        id="editGroupMembershipModalLabel"
                      >
                        Edit Group Membership
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <form
                      id="editGroupMembershipForm"
                      onsubmit="event.preventDefault(); submitEditGroupMembership();"
                    >
                      <div class="modal-body">
                        <input
                          type="hidden"
                          class="form-control"
                          id="editMembershipId"
                        />
                        <div class="form-group">
                          <label for="editMembershipGroup">Select Group</label>
                          <select
                            class="form-control"
                            id="editMembershipGroup"
                            name="editMembershipGroup"
                          >
                            <!-- Populate with group options dynamically -->
                          </select>
                        </div>
                        <div class="form-group">
                          <label for="editMembershipUser">Select User</label>
                          <select
                            class="form-control"
                            id="editMembershipUser"
                            name="editMembershipUser"
                            multiple
                          >
                            <!-- Populate with user options dynamically -->
                          </select>
                        </div>
                      </div>
                      <div
                        class="modal-footer border-top-0 d-flex justify-content-center"
                      >
                        <button
                          type="submit"
                          class="btn"
                          id="editMembershipBtn"
                          style="background: #355b11; color: white"
                        >
                          Submit
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>

              <!-- Assign group permissions modal -->
              <div
                class="modal fade"
                id="createPermissionModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="createPermissionModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="createPermissionModalLabel">
                        Assign Permissions to Group
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <form>
                        <div class="form-group">
                          <label for="groupSelect">Select Group:</label>
                          <select id="groupSelect">
                            <!-- Group options will be populated dynamically -->
                          </select>
                        </div>
                        <div class="form-group">
                          <label for="folderSelect">Select Folder:</label>
                          <select id="folderSelect">
                            <!-- Folder options will be populated dynamically -->
                          </select>
                        </div>
                        <!-- Checkbox container -->
                        <div id="checkboxContainer"></div>
                        <!-- Pagination container -->
                        <div
                          id="permissionsPagination"
                          class="pagination-container"
                        ></div>
                      </form>
                    </div>
                    <br />
                    <br />
                    <div class="modal-footer">
                      <button
                        type="button"
                        class="btn"
                        style="background: #355b11; color: white"
                        onclick="createPermission()"
                        id="createPermissionModalBtn"
                      >
                        Assign Permission
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Edit Group Permission Modal -->
              <div
                class="modal fade"
                id="editPermissionModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="editPermissionModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="editPermissionModalLabel">
                        Edit Group Permission
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <form
                        id="editPermissionForm"
                        onsubmit="event.preventDefault(); submitEditPermissionsForm();"
                      >
                        <div class="form-group">
                          <!-- Hidden input field to store the group permission ID -->
                          <input
                            type="hidden"
                            class="form-control"
                            id="editPermissionId"
                          />
                          <label for="editGroupSelect">Select Group:</label>
                          <select class="form-control" id="editGroupSelect">
                            <!-- Populate group options dynamically or set the selected group -->
                          </select>
                        </div>
                        <div class="form-group">
                          <label for="editFolderSelect">Select Folder:</label>
                          <select class="form-control" id="editFolderSelect">
                            <!-- Populate folder options dynamically or set the selected folder -->
                          </select>
                        </div>
                        <!-- Checkbox container for editing permissions -->
                        <div id="editCheckboxContainer"></div>
                        <!-- Pagination container for editing permissions -->
                        <div
                          id="editPermissionsPagination"
                          class="pagination-container"
                        ></div>
                        <div class="modal-footer">
                          <button
                            type="submit"
                            id="updatePermissionModalBtn"
                            class="btn"
                            style="background: #355b11; color: white"
                          >
                            Save Changes
                          </button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Delete Permission Modal -->
              <div
                class="modal fade"
                id="confirmDeletePermissionModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="exampleModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">
                        Confirm Deletion
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      Are you sure you want to delete this permission?
                    </div>
                    <div class="modal-footer">
                      <button
                        type="button"
                        id="deletePermissionBtn"
                        class="btn btn-danger"
                        onclick="deletePermission()"
                      >
                        Delete
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Dashboard count -->
              <div class="content" id="content">
                <nav aria-label="breadcrumb">
                  <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                      <a href="#">Home</a>
                    </li>
                    <li class="breadcrumb-item active" aria-current="page">
                      Dashboard
                    </li>
                  </ol>
                </nav>
                <div class="data-info">
                  <div
                    class="box"
                    data-toggle="tooltip"
                    data-placement="bottom"
                    title="View Users"
                  >
                    <i class="fa fa-user"></i>
                    <div class="data">
                      <p>Users</p>
                      <span id="userCount"
                        ><i class="fa fa-spinner fa-spin"></i
                      ></span>
                    </div>
                  </div>

                  <div
                    class="box"
                    data-toggle="tooltip"
                    data-placement="bottom"
                    title="View Groups"
                  >
                    <i class="fa fa-users"></i>
                    <div class="data">
                      <p>Groups</p>
                      <span id="groupCount"
                        ><i class="fa fa-spinner fa-spin"></i
                      ></span>
                    </div>
                  </div>
                  <div
                    class="box"
                    data-toggle="tooltip"
                    data-placement="bottom"
                    title="View Folders"
                  >
                    <i class="fa fa-folder"></i>
                    <div class="data">
                      <p>Folders</p>
                      <span id="folderCount"
                        ><i class="fa fa-spinner fa-spin"></i
                      ></span>
                    </div>
                  </div>
                  <div
                    class="box"
                    data-toggle="tooltip"
                    data-placement="bottom"
                    title="View Permissions"
                  >
                    <i class="fa fa-cog"></i>
                    <div class="data">
                      <p>Permissions</p>
                      <span id="permissionCount"
                        ><i class="fa fa-spinner fa-spin"></i
                      ></span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- ************************Lookups ******************************** -->

              <div id="categories" style="margin-top: 30px">
                <!-- Breadcrumb -->
                <nav aria-label="breadcrumb">
                  <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                      <a href="#">Home</a>
                    </li>
                    <li class="breadcrumb-item active" aria-current="page">
                      Lookups
                    </li>
                  </ol>
                </nav>
                <p style="font-weight: bold; cursor: pointer">Categories</p>
                <div class="row">
                  <div class="col-md-8">
                    <ul id="tree1" class="tree"></ul>
                  </div>
                </div>
              </div>

              <!-- ******************************Create Serializer modal********************************** -->
              <div
                class="modal fade"
                id="serializerForm"
                tabindex="-1"
                role="dialog"
                aria-labelledby="serializerModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header border-bottom-0">
                      <h5 class="modal-title" id="serializerModalLabel">
                        Create New Serializer
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <form
                      id="serializerCreateForm"
                      onsubmit="event.preventDefault(); createSerializer();"
                    >
                      <div class="modal-body">
                        <div class="form-group">
                          <label for="prefix">Prefix</label>
                          <input
                            type="text"
                            class="form-control"
                            id="prefix"
                            name="prefix"
                            placeholder="Enter Prefix"
                          />
                        </div>
                        <div class="form-group">
                          <label for="number_format">Number Format</label>
                          <input
                            type="text"
                            class="form-control"
                            id="number_format"
                            name="number_format"
                            placeholder="Enter Number Format"
                          />
                        </div>
                        <div class="form-group">
                          <label for="postfix">Postfix</label>
                          <input
                            type="text"
                            class="form-control"
                            id="postfix"
                            name="postfix"
                            placeholder="Enter Postfix"
                          />
                        </div>
                        <div class="form-group">
                          <label for="date_format">Date Format</label>
                          <input
                            type="text"
                            class="form-control"
                            id="date_format"
                            name="date_format"
                            placeholder="Enter Date Format"
                          />
                        </div>
                        <div class="form-group">
                          <label for="order_of_items">Order of Items</label>
                          <input
                            type="text"
                            class="form-control"
                            id="order_of_items"
                            name="order_of_items"
                            placeholder="Enter Order of Items"
                          />
                        </div>
                        <div class="form-group">
                          <label for="last_number">Last Number</label>
                          <input
                            type="text"
                            class="form-control"
                            id="last_number"
                            name="last_number"
                            placeholder="Enter Last Number"
                          />
                        </div>
                      </div>
                      <div
                        class="modal-footer border-top-0 d-flex justify-content-center"
                      >
                        <button
                          type="submit"
                          class="btn"
                          id="serializerSubmitBtn"
                          style="background: #355b11; color: white"
                        >
                          Submit
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>

              <!-- ******************************Edit Serializer modal********************************** -->
              <div
                class="modal fade"
                id="editSerializerForm"
                tabindex="-1"
                role="dialog"
                aria-labelledby="editSerializerModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header border-bottom-0">
                      <h5 class="modal-title" id="editSerializerModalLabel">
                        Edit Serializer
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <form
                      id="editSerializerForm"
                      onsubmit="event.preventDefault(); submitEditSerializerForm();"
                    >
                      <div class="modal-body">
                        <input
                          type="hidden"
                          class="form-control"
                          id="edit_serializer_id"
                        />
                        <div class="form-group">
                          <label for="edit_last_number">Last Number</label>
                          <input
                            type="text"
                            class="form-control"
                            id="edit_last_number"
                            name="edit_last_number"
                            placeholder="Enter Last Number"
                          />
                        </div>
                        <div class="form-group">
                          <label for="edit_order_of_items"
                            >Order of Items</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            id="edit_order_of_items"
                            name="edit_order_of_items"
                            placeholder="Enter Order of Items"
                          />
                        </div>
                        <div class="form-group">
                          <label for="edit_prefix">Prefix</label>
                          <input
                            type="text"
                            class="form-control"
                            id="edit_prefix"
                            name="edit_prefix"
                            placeholder="Enter Prefix"
                          />
                        </div>
                        <div class="form-group">
                          <label for="edit_number_format">Number Format</label>
                          <input
                            type="text"
                            class="form-control"
                            id="edit_number_format"
                            name="edit_number_format"
                            placeholder="Enter Number Format"
                          />
                        </div>
                        <div class="form-group">
                          <label for="edit_postfix">Postfix</label>
                          <input
                            type="text"
                            class="form-control"
                            id="edit_postfix"
                            name="edit_postfix"
                            placeholder="Enter Postfix"
                          />
                        </div>
                        <div class="form-group">
                          <label for="edit_date_format">Date Format</label>
                          <input
                            type="text"
                            class="form-control"
                            id="edit_date_format"
                            name="edit_date_format"
                            placeholder="Enter Date Format"
                          />
                        </div>
                      </div>
                      <div
                        class="modal-footer border-top-0 d-flex justify-content-center"
                      >
                        <button
                          type="submit"
                          class="btn"
                          id="editSerializerSubmitBtn"
                          style="background: #355b11; color: white"
                        >
                          Submit
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>

              <!-- ******************************Confirm Delete Serializer Modal********************************** -->
              <div
                class="modal fade"
                id="confirmDeleteSerializerModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="confirmDeleteSerializerModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header border-bottom-0">
                      <h5
                        class="modal-title"
                        id="confirmDeleteSerializerModalLabel"
                      >
                        Confirm Delete Serializer
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <p>Are you sure you want to delete this serializer?</p>
                      <!-- Hidden input field to store the serializer ID -->
                      <input type="hidden" id="deleteSerializerId" />
                    </div>
                    <div
                      class="modal-footer border-top-0 d-flex justify-content-center"
                    >
                      <button
                        type="button"
                        class="btn btn-secondary"
                        data-dismiss="modal"
                      >
                        Cancel
                      </button>
                      <button
                        type="button"
                        class="btn btn-danger"
                        id="deleteSerializerBtn"
                        onclick="deleteSerializer()"
                      >
                        Delete
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Activate Modal -->
              <div
                class="modal fade"
                id="confirmActivateModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="confirmActivateModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header border-bottom-0">
                      <h5 class="modal-title" id="confirmActivateModalLabel">
                        Confirm Activation
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <p id="activateConfirmationMessage">
                        Are you sure you want to activate this user?
                      </p>
                      <input type="hidden" id="activateUserId" />
                    </div>
                    <div
                      class="modal-footer border-top-0 d-flex justify-content-center"
                    >
                      <button
                        type="button"
                        class="btn btn-secondary"
                        data-dismiss="modal"
                      >
                        Cancel
                      </button>
                      <button
                        type="button"
                        class="btn btn-success"
                        id="activateUserBtn"
                        onclick="activateUser()"
                      >
                        Activate
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Deactivate Modal -->
              <div
                class="modal fade"
                id="confirmDeactivateModal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="confirmDeactivateModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header border-bottom-0">
                      <h5 class="modal-title" id="confirmDeactivateModalLabel">
                        Confirm Deactivation
                      </h5>
                      <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <p id="deactivateConfirmationMessage">
                        Are you sure you want to deactivate this user?
                      </p>
                      <input type="hidden" id="deactivateUserId" />
                    </div>
                    <div
                      class="modal-footer border-top-0 d-flex justify-content-center"
                    >
                      <button
                        type="button"
                        class="btn btn-secondary"
                        data-dismiss="modal"
                      >
                        Cancel
                      </button>
                      <button
                        type="button"
                        class="btn btn-warning"
                        id="deactivateUserBtn"
                        onclick="deactivateUser()"
                      >
                        Deactivate
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- *******************Groups Table***************** -->
              <div id="groupsTableContainer" class="table-container">
                <div class="card-header d-flex justify-content-between mb-3">
                  <!-- Breadcrumb -->
                  <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                      <li class="breadcrumb-item">
                        <a href="#">Home</a>
                      </li>
                      <li class="breadcrumb-item active" aria-current="page">
                        Groups
                      </li>
                    </ol>
                  </nav>
                  <button
                    type="button"
                    data-toggle="modal"
                    data-target="#form"
                    class="btn btn-secondary"
                  >
                    New Group
                  </button>
                  <button
                    type="button"
                    data-toggle="modal"
                    data-target="#assignUsersModal"
                    class="btn btn-secondary"
                  >
                    Assign User
                  </button>
                </div>
                <br />
                <table
                  id="tab"
                  class="table table-hover table-bordered"
                  cellspacing="3"
                  style="
                    box-shadow: 0 4px 8px rgba(5, 2, 2, 0.1);
                    width: 100%;
                    border-radius: 10px;
                  "
                >
                  <thead>
                    <tr>
                      <th>#</th>
                      <th>Group Name</th>
                      <th>Group Admin</th>
                      <th>Users</th>
                      <th>Members</th>
                      <th>Status</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody id="tbody"></tbody>
                </table>
                <!-- Pagination -->
                <div
                  id="pagination"
                  class="pagination justify-content-center"
                ></div>
              </div>

              <!-- *******************Group Memberships Table***************** -->
              <div
                id="groupMembershipsTableContainer"
                class="table-container"
                style="display: none"
              >
                <div class="card-header d-flex justify-content-between mb-3">
                  <!-- Breadcrumb -->
                  <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                      <li class="breadcrumb-item">
                        <a href="#">Home</a>
                      </li>
                      <li class="breadcrumb-item active" aria-current="page">
                        Memberships
                      </li>
                    </ol>
                  </nav>
                </div>
                <br />
                <table
                  id="groupMembershipsTab"
                  class="table table-hover table-bordered"
                  cellspacing="3"
                  style="
                    justify-content: center;
                    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                    width: 100%;
                  "
                >
                  <thead>
                    <tr>
                      <th>#</th>
                      <th>User</th>
                      <th>Group</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody id="groupMembershipsTbody"></tbody>
                </table>
                <div
                  id="membershipsPagination"
                  class="pagination justify-content-center"
                ></div>
              </div>

              <!-- *******************Group Permissions Table***************** -->
              <div id="groupPermissionsTableContainer" class="table-container">
                <div class="card-header d-flex justify-content-between mb-3">
                  <!-- Breadcrumb -->
                  <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                      <li class="breadcrumb-item">
                        <a href="#">Home</a>
                      </li>
                      <li class="breadcrumb-item active" aria-current="page">
                        Permissions
                      </li>
                    </ol>
                  </nav>
                  <button
                    type="button"
                    data-toggle="modal"
                    data-target="#createPermissionModal"
                    class="btn btn-secondary"
                  >
                    Assign Permissions
                  </button>
                </div>
                <br />
                <table
                  id="permissionsTable"
                  class="table table-hover table-bordered"
                  cellspacing="3"
                  style="
                    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                    width: 100%;
                    border-radius: 10px;
                  "
                >
                  <thead>
                    <tr>
                      <th>#</th>
                      <th>Group</th>
                      <th>Folder</th>
                      <th>View Users</th>
                      <th>Add User</th>
                      <th>Assign User Group</th>
                      <th>View User</th>
                      <th>Update User</th>
                      <th>Delete User</th>
                      <th>View Groups</th>
                      <th>Add Group</th>
                      <th>View Group</th>
                      <th>Update Group</th>
                      <th>Delete Group</th>
                      <th>View Group Memberships</th>
                      <th>Add Group Membership</th>
                      <th>View Group Membership</th>
                      <th>Update Group Membership</th>
                      <th>Delete Group Membership</th>
                      <th>View Group Permissions</th>
                      <th>Add Group Permission</th>
                      <th>View Group Permission</th>
                      <th>Update Group Permission</th>
                      <th>Delete Group Permission</th>
                      <th>View Folders</th>
                      <th>Create Folder</th>
                      <th>Open Folder</th>
                      <th>Update Folder</th>
                      <th>Delete Folder</th>
                      <th>View Documents</th>
                      <th>Add Document</th>
                      <th>View Document</th>
                      <th>Update Document</th>
                      <th>Delete Document</th>
                      <th>View Fields</th>
                      <th>Add Field</th>
                      <th>View Field</th>
                      <th>Update Field</th>
                      <th>Delete Field</th>
                      <th>View Docfields</th>
                      <th>Create Docfield</th>
                      <th>View Docfield</th>
                      <th>Update Docfield</th>
                      <th>Delete Docfield</th>
                      <th>View Worksteps</th>
                      <th>Add Workstep</th>
                      <th>View Workstep</th>
                      <th>Update Workstep</th>
                      <th>Delete Workstep</th>
                      <th>View Possible Actions</th>
                      <th>Add Possible Action</th>
                      <th>View Possible Action</th>
                      <th>Update Possible Action</th>
                      <th>Delete Possible Action</th>
                      <th>View Workstep Results</th>
                      <th>Add Workstep Result</th>
                      <th>View Workstep Result</th>
                      <th>Rewind Workstep Result</th>
                      <th>Delete Workstep Result</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody id="permissionsTbody"></tbody>
                </table>
                <div
                  id="permissionsPagination"
                  class="pagination justify-content-center"
                ></div>
              </div>

              <!-- *******************Users Table***************** -->
              <div
                id="usersTableContainer"
                class="table-container"
                style="display: none"
              >
                <div class="card-header d-flex justify-content-between mb-3">
                  <!-- Breadcrumb -->
                  <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                      <li class="breadcrumb-item">
                        <a href="#">Home</a>
                      </li>
                      <li class="breadcrumb-item active" aria-current="page">
                        Users
                      </li>
                    </ol>
                  </nav>
                </div>
                <table
                  id="usersTable"
                  class="table table-hover table-bordered"
                  cellspacing="3"
                  style="
                    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                    width: 100%;
                    border-radius: 10px;
                  "
                >
                  <thead>
                    <tr>
                      <th>#</th>
                      <th>Name</th>
                      <th>Username</th>
                      <th>Groups</th>
                      <th>Photo</th>
                      <th>Stamp</th>
                      <th>Signature</th>
                      <th>Status</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody id="usersTbody"></tbody>
                </table>
                <div
                  id="usersPagination"
                  class="pagination justify-content-center"
                ></div>
              </div>

              <!-- *******************Serializer Table***************** -->
              <div
                id="serializerTableContainer"
                class="table-container"
                style="display: none"
              >
                <div class="card-header d-flex justify-content-between mb-3">
                  <!-- Breadcrumb -->
                  <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                      <li class="breadcrumb-item">
                        <a href="#">Home</a>
                      </li>
                      <li class="breadcrumb-item active" aria-current="page">
                        Serializer
                      </li>
                    </ol>
                  </nav>
                  <button
                    type="button"
                    data-toggle="modal"
                    data-target="#serializerForm"
                    class="btn btn-secondary"
                  >
                    New Serializer
                  </button>
                </div>
                <br />
                <table
                  id="serializerTable"
                  class="table table-hover table-bordered"
                  cellspacing="3"
                  style="
                    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                    width: 100%;
                    border-radius: 10px;
                  "
                >
                  <thead>
                    <tr>
                      <th>#</th>
                      <th>Number Format</th>
                      <th>Date Format</th>
                      <th>Prefix</th>
                      <th>Postfix</th>
                      <th>Order of Items</th>
                      <th>Last Number</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody id="serializerTbody"></tbody>
                </table>
                <div
                  id="serializerPagination"
                  class="pagination justify-content-center"
                ></div>
              </div>

              <!-- main js -->
              <script src="../assets/js/config.js"></script>
              <script src="../assets/js/logout.js"></script>
              <script src="../assets/js/script.js"></script>
              <script src="../assets/js/groups.js"></script>
              <script src="../assets/js/sidebar.js"></script>
              <script src="../assets/js/navbar.js"></script>
              <script src="../assets/js/usersTable.js"></script>
              <script src="../assets/js/groupMemberships.js"></script>
              <script src="../assets/js/groupPermissions.js"></script>
              <script src="../assets/js/lookups.js"></script>
              <script src="../assets/js/serializer.js"></script>

              <script src="../assets/toastr/toastr.min.js"></script>
              <script src="../assets/js/jquery.counterup.min.js"></script>
              <script src="../assets/js/jquery.waypoints.min.js"></script>
              <script src="../assets/DataTables/datatables.min.js"></script>
              <script src="../assets/js/jstree.js"></script>
              <script src="../assets/js/tom-select.complete.min.js"></script>

              <script src="../assets/DataTables/jquery.dataTables.min.js"></script>
              <script src="../assets/DataTables/dataTables.buttons.min.js"></script>
              <script src="../assets/DataTables/buttons.colVis.min.js"></script>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
